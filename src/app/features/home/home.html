<div class="container fade-in">

  <!-- Logo App -->
  <header class="hero-section">
    <img src="assets/images/Logo.png" alt="Logo de la Aplicaci√≥n" class="app-logo">
    <p class="subtitle">Estad√≠sticas y Predicciones con IA</p>
  </header>

  <div class="search-container" style="text-align: center; margin: 30px 0;">

    <!-- Buscar equipo -->
    <span class="p-input-icon-left">
      <i class="pi pi-search"></i>
      <input type="text"
             pInputText
             [(ngModel)]="searchQuery"
             (keyup.enter)="searchTeam()"
             placeholder="Buscar equipo (ej: Barcelona)..."
             style="width: 300px" />
    </span>

    <p-button
            label="Buscar"
            icon="pi pi-search"
            (click)="searchTeam()"
            styleClass="ml-2"
            [loading]="isSearching">
    </p-button>

  </div>

  <div *ngIf="foundTeams.length > 0" style="margin-bottom: 30px;">
    <h3>Resultados:</h3>
    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">

<div *ngFor="let team of foundTeams"
     (click)="goToTeamDetail(team)"
     class="team-card-hover">

        <img [src]="team.strTeamBadge || team['strBadge'] || 'assets/images/Logo.png'"
             width="80"
             alt="Escudo"
             onerror="this.src='assets/images/Logo.png'">

        <p style="font-weight: bold; margin-top: 5px;">{{ team.strTeam }}</p>
        <small>{{ team.strLeague }}</small>
      </div>

    </div>
  </div>

  <!-- Partidos En Vivo -->
  <section class="mt-4 dashboard-section">
    <div class="section-header">
      <h3>üî¥ En Vivo</h3>
      <small class="text-muted badge-filter">{{ filterMessage }}</small>
    </div>

    <div class="matches-grid" *ngIf="liveMatches.length > 0">
      <div *ngFor="let match of liveMatches" class="match-card live-border">

        <div class="team team-home">
          <span class="team-name">{{ match.homeName }}</span>
          <img [src]="match.homeLogo"
               alt="Escudo local"
               class="team-logo"
               onerror="this.src='assets/placeholder.png'">
        </div>

        <div class="score-board">
          <span class="score">{{ match.homeScore }} - {{ match.awayScore }}</span>
          <div class="live-badge" *ngIf="match.gameTime">
            <span class="blink">‚óè</span> {{ match.gameTime }}'
          </div>
        </div>

        <div class="team team-away">
          <img [src]="match.awayLogo"
               alt="Escudo visitante"
               class="team-logo"
               onerror="this.src='assets/placeholder.png'">
          <span class="team-name">{{ match.awayName }}</span>
        </div>

      </div>
    </div>

    <div *ngIf="liveMatches.length === 0" class="empty-state">
      <p>No hay partidos en juego en este momento.</p>
    </div>
  </section>

  <!-- Top 5 -->
  <section class="mt-5 dashboard-section">
    <h3>üèÜ Clasificaci√≥n La Liga (Top 5)</h3>

    <div *ngIf="standings.length === 0 && !loading" class="alert alert-warning">
      No se pudo cargar la informaci√≥n de la clasificaci√≥n.
    </div>

    <table class="table-custom" *ngIf="standings.length > 0">
      <thead>
        <tr>
          <th title="Posici√≥n">#</th>
          <th>Equipo</th>
          <th title="Puntos">Pts</th>
          <th title="Partidos Jugados">PJ</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of standings">
          <td class="rank-cell">{{ item.rank }}</td>
          <td>
            <div class="team-row" 
            style="display: flex; align-items: center; gap: 10px;">

              <img [src]="item.teamBadge || item.teamLogo || 'assets/images/Logo.png'"
                   width="30"
                   height="30"
                   alt="Escudo"
                   style="object-fit: contain;"
                   onerror="this.src='assets/images/Logo.png'">

              <strong>{{ item.teamName }}</strong>
            </div>
          </td>
          <td class="points-cell">{{ item.points }}</td>
          <td>{{ item.matches }}</td>
        </tr>
      </tbody>
    </table>

    <div class="text-center mt-3">
      <a routerLink="/teams" class="btn-link">Ver clasificaci√≥n completa ‚Üí</a>
    </div>
  </section>
</div>
